---
title: 修复 Linux 文件删除后空间未释放的问题
date: 2024-12-25T13:56:26+08:00
author: LiangMingJian
---

# BUG

在 Linux 系统中，通过 `rm` 删除某些文件后，有概率会出现输入 `df -hl` 命令，仍然显示空间未被释放的问题。

# Resolution

当一个文件删除后，文件系统的目录会移除该文件，因此 du 命令（显示目录和文件信息）将不再统计打印该文件信息。

但是，如果**系统中还有进程持有该文件的句柄，那么该文件就没有真正从磁盘中删除**，该文件仍然会占用内存空间，df 命令（显示磁盘信息）仍然会统计这个文件。

此时，用户可以通过 `lsof -n | grep deleted` 命令查看处于 deleted 状态（删除状态）的文件，接着通过 `kill` 命令来杀掉对应进程，释放资源。

当然，直接重启服务器也是一个很好的操作。

——————————

> [ 文件删除后，空间仍占用 @CSDN ](https://blog.csdn.net/weixin_44052055/article/details/105461148)
