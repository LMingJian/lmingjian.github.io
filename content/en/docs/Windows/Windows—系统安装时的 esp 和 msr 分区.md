---
title: Windows 系统安装时的 esp 和 msr 分区
date: 2021-03-31
author: LM
---

## Question

Windows 系统在安装时，硬盘必须要分配 msr 分区和 esp 分区。

## Cause1

- esp 全称 EFI system partition，EFI 系统引导。任何支持 EFI 模式的电脑都需要从 ESP 启动系统，EFI 固件可从 ESP 加载 EFI 启动程序和应用程序。
- esp 是一个 FAT16 或 FAT32 格式的物理分区，其分区标识是EF（十六进制）而非常规的 0E 或 0C，因此，该分区在 Windows 操作系统下一般是不可见的。
- esp 是一个独立于操作系统之外的分区，操作系统被引导之后，就不再依赖它。这使得 esp 非常适合用来存储那些系统级的维护性的工具和数据，比如：引导管理程序、驱动程序、系统维护工具、系统备份等，甚至可以在 esp 里安装一个特殊的操作系统。

## Cause2

- msr 分区本身没有做任何工作，是名副其实的保留分区。
- Windows 不会向 msr 分区建立文件系统或者写数据，这是为了调整分区结构而保留的分区，msr 分区本质上就是写在分区表上面的未分配空间。
- msr 分区的用途是防止将一块 GPT 磁盘接到老系统中，被当作未格式化的空硬盘而继续操作（例如重新格式化）导致的数据丢失。若 GPT 磁盘上有这个分区，那么当把它接入 XP 等老系统中时，系统便会提示无法识别的磁盘，也无法进一步操作。

![](/images/drawingbed/img/202205051002838.png)

