---
title: Linux 常用知识
date: 2021-05-14
author: LM
---

## 1.linux 系统里，buffer 和 cache 如何区分？

buffer 和 cache 都是内存中的一块区域，区别在于一个是储存时使用，一个在读取时使用。

- 当 CPU 需要写数据到磁盘时，由于磁盘速度比较慢，所以 CPU 先把数据存进 buffer，然后 CPU 去执行其他任务，然后将 buffer 中的数据定期写入磁盘；
- 当 CPU 需要从磁盘读入数据时，由于磁盘速度比较慢，可以把即将用到的数据提前存入 cache，CPU 可以直接从 cache 中拿数据。

## 3.描述 Linux 运行级别 0-6 的各自含义

- 0：关机模式
- 1：单用户模式（ 可在该模式下修改 root 密码 ）
- 2：无网络支持的多用户模式
- 3：有网络支持的多用户模式（文本模式，工作中最常用的模式 ）
- 4：保留，未使用
- 5：有网络支持的多用户窗口模式（ 桌面模式 ）
- 6：重新引导系统，即重启

## 4.描述 Linux 系统从开机到登陆界面的启动过程

1. 开机 BIOS 自检，加载硬盘
2. 读取 MBR，MBR 引导
3. grub 引导菜单 ( Boot Loader )
4. 加载内核 kernel
5. 启动 init 进程，依据 inittab 文件设定运行级别
6. init 进程，执行 rc.sysinit 文件
7. 启动内核模块，执行不同级别的脚本程序
8. 执行 /etc/rc.d/rc.local
9. 启动 mingetty，进入系统登陆界面

## 5.描述 Linux 下软链接和硬链接的区别

在 Linux 系统中，链接分为两种，一种是硬链接（Hard link），另一种称为符号链接或软链接（Symbolic Link）

- 默认不带参数的情况下，ln 创建的是硬链接，带 -s 参数的 ln 命令创建的是软链接。
- 硬链接文件与源文件的 inode 节点号相同，而软链接文件的 inode 节点号，与源文件不同，
- ln 命令不能对目录创建硬链接，但可以创建软链接。对目录的软链接会经常使用到。
- 删除软链接文件，对源文件和硬链接文件无任何影响。
- 删除文件的硬链接文件，对源文件及软链接文件无任何影响。
- 删除链接文件的源文件，对硬链接文件无影响，会导致其软链接失效（红底白字闪烁状）。
- 同时删除源文件及其硬链接文件，整个文件才会被真正的删除。
- 很多硬件设备的快照功能，使用的就是类似硬链接的原理。
- 软链接可以跨文件系统，硬链接不可以跨文件系统。

## 6.shell 脚本中 $? 标记的用途是什么

在写一个 shell 脚本时，如果你想要检查前一命令是否执行成功，可以在 if 条件中使用 $? 可以来检查前一命令的结束状态。简单的例子如下：

```
root@localhost:~# ls /usr/bin/
root@localhost:~# echo $?
```

- 如果结束状态是 0，说明前一个命令执行成功。
- 如果结束状态不是 0，说明命令执行失败。

## 9.将本地的 80 端口的请求转发到 8080 端口，本机地址 10.0.0.254，写出命令

```
$ iptables -t nat -A PREROUTING -d 10.0.0.254 -p tcp --dprot 80 -j DNAT --to-destination 10.0.0.254:8080
```
