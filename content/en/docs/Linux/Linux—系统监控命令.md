---
title: Linux 的系统监控命令
date: 2021-04-29
author: LM
---

## 1.top – 进程活动监控命令

top 命令会显示 Linux 的进程。它提供了一个运行中系统的实时动态视图，即实际的进程活动。默认情况下，它显示在服务器上运行的 CPU 占用率最高的任务，并且每五秒更新一次。

```
top -t	是否显示汇总信息
-m	是否显示内存信息
-A	根据各种系统资源的利用率对进程进行排序，有助于快速识别系统中性能不佳的任务。
-f	进入 top 的交互式配置屏幕，用于根据特定的需求而设置 top 的显示。
-o	交互式地调整 top 每一列的顺序。
-r	调整优先级（renice）
-k	杀掉进程（kill）
-z	切换彩色或黑白模式
```

## 2.w – 找出登录用户

w 命令 显示了当前登录在该系统上的用户及其进程。

```
w username
w vivek
```

## 3.uptime – 系统运行时间

uptime 命令可以用来查看服务器运行了多长时间：当前时间、已运行的时间、当前登录的用户连接数，以及过去 1 分钟、5 分钟和 15 分钟的系统负载平均值，1 可以被认为是最佳负载值。

## 4.ps – 显示系统进程

ps 命令显示当前运行的进程。

```
ps -A       |显示所有的进程
ps -Al      |显示长输出格式
ps -AlF     |显示完整输出格式（它将显示传递给进程的命令行参数）
ps -AlFH    |显示线程（轻量级进程（LWP）和线程的数量（NLWP））
ps -AlLm    |在进程后显示线程
ps ax# ps axu       |显示系统上所有的进程
pstree              |显示进程树
ps -U vivek -u vivek u        |显示指定用户（如 vivek）运行的进程
ps -C lighttpd -o pid=      |显示某进程（如 lighttpd）的 PID
ps -p 55977 -o comm=          |显示指定 PID（如 55977）的进程名称
ps -auxf | sort -nr -k 4 | head -10     |找出占用内存资源最多的前10个进程
ps -auxf | sort -nr -k 3 | head -10     |找出占用CPU资源最多的前10个进程
```

## 5.free – 内存使用情况

free 命令显示了系统的可用和已用的物理内存及交换内存的总量，以及内核用到的缓存空间。

## 6.iostat – CPU 平均负载和磁盘活动

iostat 命令用于汇报 CPU 的使用情况，以及设备、分区和网络文件系统（NFS）的 IO 统计信息。

## 7.sar – 监控、收集和汇报系统活动

`sar` 命令用于收集、汇报和保存系统活动信息。

```
sar -n DEV | more       |查看网络统计
sar -n DEV -f /var/log/sa/sa24 | more        |显示 24 日的网络统计
sar 4 5         |显示实时使用情况
```

## 8. mpstat – 监控多处理器的使用情况

mpstat 命令显示每个可用处理器的使用情况，编号从 0 开始。

```
mpstat -P ALL   |显示每个处理器的平均使用率
```

## 9.pmap – 监控进程的内存使用情况

`pmap` 命令用以显示进程的内存映射，使用此命令可以查找内存瓶颈。

```
pmap -d PID   |显示 PID 进程的内存信息
```

注意输出的最后一行，mapped: 933712K 表示映射到文件的内存量 ，writeable/private: 4304K 表示私有地址空间，shared: 768000K 表示此进程与其他进程共享的地址空间

## 10.netstat – 网络统计监控工具

`netstat` 命令显示网络连接、路由表、接口统计、伪装连接和多播连接等信息。

```
netstat -tulpn
netstat -nat
```

## 11.ss – 网络统计

ss 命令用于获取套接字统计信息。它可以显示类似于 netstat 的信息。不过 netstat 几乎要过时了，ss 命令更具优势。

```
ss -t -a   |显示所有 TCP 或 UDP 套接字
ss -u -a
```



