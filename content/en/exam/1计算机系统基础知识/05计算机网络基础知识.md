---
title: 05计算机网络基础知识
date: 2023-04-10
author: LM
---

## 1.计算机网络分类

### 1.1 概念

- 计算机网络是使用**单一**技术的**自主**计算机的**互联**集合。
- 单一：使用标准化的技术。
- 自主：计算机之间没有主从。
- 互联：互联互通。

### 1.2 按传输距离

- 局域网(LAN)：一般分布在几米到几公里范围
- 城域网(MAN)：一般分布在几公里到几十公里或一个城区
- 广域网(WAN)：一般分布在数十公里到几千公里

### 1.3 按工作模式

- 对等网络
- 基于服务器的网络

### 1.4 按传输介质

#### 1.4.1 有线网络

- 双绞线网络：两根互相绝缘的铜导线用规则的方法绞合，绞合可减少对相邻导线的电磁干扰。
- 同轴电缆网络：由内导体铜质芯线、绝缘层、网状编织的外导体屏蔽层以及保护塑料外层所组成的线缆，广泛用于传输较高速率的数据。
- 多模光纤网络：使用多条反射光线进行传输，适合于近距离传输
- 单模光纤网络：使光线沿直线传播，不会产生多次反射，传输频带宽，传输容量大，损耗较小，适合远距离传输。

#### 1.4.2 无线网络

- 中波无线电：主要沿地面传播，绕射能力强，适用于广播和海上通信；注意无线电的频带是有限的，上限为300GHz。
- 短波无线电：具有较强的电离层反射能力，适用于环球通信。
- 微波无线电：绕射能力较差，可作为视距或超视距中继通信，短距离的点对点通信。
- 红外：不能穿透坚实的物体，防窃听的安全性要比无线电系统好；几乎不会受到电气、天气、人为干扰，抗干扰性强；红外线通信机体积小，重量轻，结构简单，价格低廉；必须在直视距离内通信，且传播受天气的影响。
- 激光：激光通信系统组成设备包括发送和接收两个部分。激光通信的容量大，保密性强，结构轻便，设备经济。但距离限于视距(数公里至数十公里范围)，易受气候影响，且瞄准困难。激光束有较高的方向性，这给发射和接受点之间的瞄准带来不少困难。

## 2.计算机网络体系结构

### 2.1  体系结构的分类

- OSI 7 层体系结构：概念最为清楚，理论最为完整的结构。
- TCP / IP 4 层体系结构：广泛运用的四层体系结构。
- 五层体系结构：综合了 OSI 体系结构和 TCP/IP 体系结构二者的优点。

![](/images/drawingbed/img/202309121735629.png)

### 2.2 OSR / IM 7 层结构

#### 2.2.1  内容

![](/images/drawingbed/img/202308231015168.png)

#### 2.2.3 物理层

- 物理层通过各类协议提供、建立并维护物理链路所需的机械、电气、功能、规程的特性。
- 中继器：当信号传输到一定距离的时候，就会杀减的比较厉害，想将信号传输到更远距离的地方，就需要一个设备将信号放大再传出去，实现一个中继的状态，像这样放大信号的设备就是中继器。
- 集线器：对物理的链路进行扩展，可以通过集线器连接更多的节点。由于本质上还是相当于在一根铜线上多节结几个同一种介质的节点，所以这些节点发信号的时候会产生冲突，产生冲突域，一个集线器就是一个冲突域。

#### 2.2.4 数据链路层（帧）

- 数据链路层负责两个相邻节点间的无差错数据帧传送，为网络层提供可靠的数据信息。
- 数据链路层的数据单位是帧，具有流量控制功能。
- 链路是相邻两结点间的物理线路，数据链路可以理解为数据的通道，是物理链路加上必要的通信协议而组成的逻辑链路。
- 数据链路层协议的代表包括 PPP、 STP 等。 
- 交换机：可以理解为一个多端口的网桥。在第二层可以链接多个节点，提高了网络的利用率。虽然在第二层的交换机可以把第一层的冲突域隔离开，但是它链接的设备依然在广播影响的范围之内（向一个特定的地址发送一个数据包之后，这个数据包会转送到所有范围内的节点上，大家都可以收到这个数据包），称为广播域。隔离广播域就需要更高层次的设备，例如网络层的路由。
- 网桥： 提供两个局域网间数据链路层间按帧传送信息的功能。 

#### 2.2.5 网络层（包/分组）

-  OSI 参考模型中最复杂的一层，也是通信子网的最高层，它在下两层的基础上向资源子网提供服务。
- 网络层主要是为传输层提供服务，具体功能包括寻址和路由选择（ 即选择到达目的主机的最优路径，沿着该路径传输数据包）、连接的建立、保持和终止等。它提供的服务使传输层不需要了解网络中的数据传输和交换技术 。
- 网络层为了向传输层提供服务，必须要使用数据链路层提供的服务。而数据链路层的主要作用是负责解决两个直接相邻节点之间的通信，但并不负责解决数据经过通信子网中多个转接节点时的通信问题，因此， 为了实现两个端系统之间的数据透明传送，让源端的数据能够以最佳路径透明地通过通信子网中的多个转接节点到达目的端，使得传输层不必关心网络的拓扑构型以及所使用的通信介质和交换技术，网络层必须具有以下功能： 路由选择和中继、激活和终止网络连接、链路复用、差错检测和恢复、流量/拥塞控制等。 该层协议的代表包括 IP、 IPX 等。 
- 路由器：提供多种功能使得传输层和数据链路层两个端系统之间的数据透明传送。

#### 2.2.6 传输层（段/报文）

- 实现可靠的端到端的数据传输。
- 该层是通信子网和资源子网的接口和桥梁，起到了承上启下的作用。
- 该层提供会话层和网络层之间的传输服务，这种服务从会话层获得数据，并在必要时对数据进行分割然后将数据传递到网络层，并确保数据能正确无误地传送到网络层。 因此，运输层负责提供主机中两个进程之间数据的可靠传送。
- 该层协议的代表包括 TCP、 UDP 等。

#### 2.2.7 会话层

- 允许不同机器上的用户之间建立会话。
- 这一层又称会晤层或对话层，其主要任务是负责维护两个实体之间的会话连接，确保点到点的传输不被中断，并进行会话管理和数据交换管理，即组织和协调两个会话进程之间的通信，并对数据交换进行管理。

#### 2.2.8 表示层

- OSI/RM 参考模型的最高层，直接针对用户的需要。
- 表示层是用户应用程序和网络之间的接口，完成用户希望在网络上完成的各种工作。它在其他六层工作的基础上，负责完成网络应用程序与网络操作系统之间的联系。
- 表示层为用户提供的常见服务有：文件服务、目录服务、文件传输服务（ FTP）、远程登录服务（ Telnet）、电子邮件服务（E-Mail）、打印服务、安全服务、网络管理服务、 数据库服务等。

### 2.3 TCP / IP 4 层结构

- **应用层**：对应应用层，表示层，对话层。包括 FTP，Telnet，DNS，SMTP（邮件发送），POP3（邮件接收），IMAP（邮件获取），SNMP（网络管理协议，适用于UDP），HTTP，TFTP（简单文件传输），SSL，HTTPS 等网络协议。
- **传输层**：对应传输层。包括 TCP，UDP 等网络协议。
- **网际层**：对应网络层。包括 IP，ICMP，ARP，RARP 等网络协议。
- **接口层**：对应数据链路层和物理层。包括 PPP/PPPoE（点对点协议），Ethernet（以太网），HDLC/LLC（高级数据链路控制），FrameRelay（帧中断），ATM（异步传输模式）等网络协议。

![](/images/drawingbed/img/202307040936913.png)

## 3.网络协议

### 3.1 网络协议的定义

- 网络协议是网络上所有设备（网络服务器、计算机及交换机、路由器、防火墙等）之间通信规则的集合，它规定了通信时信息必须采用的格式和这些格式的意义。
- 大多数网络都采用分层的体系结构，每一层都建立在它的下层之上，向它的上一层提供一定的服务。网络协议能为这样的不同层次提供数据交换的途径。

### 3.2 网络协议的三要素

- **语法**：规定数据与控制信息的结构或格式，包括数据的组织方式，编码方式以及信号电平的表示方式。
- **语义**：说明通信双方应当如何处理，用于协调与差错处理的控制信息。
- **定时**：称为同步或时序，即事件实现顺序的详细说明。 

### 3.3 物理层协议

#### 3.3.1 CSMA/CD： 载波监听多点接入 / 碰撞检测协议

- 一个主要解决多个站点，共用一个链路，信道资源如何的分配、划分等问题，并通过网桥将不同的局域网链接起来，进行通信和控制的协议。
- CSMA/CD 具有多点接入，载波监听（边发送, 边监听），碰撞检测等特点。
- 载波监听，简单的说，就是发送前先监听，每一个站在发送数据前都会先检测总线上是否有其他站在发送数据。若有，则需等待总线至空闲再发送。
- 碰撞检测，就是边发送边监听。适配器在发送数据的时候会边检测信道上的信号电压变化情况，以判断自己在发送数据时是否有其他站在发送数据。碰撞检测也叫冲突检测。当适配器检测到总线上出现冲突时，会停止发送数据，等待一段空闲时间后再次发送。
- 其广泛应用于以太网中，是以太网数据链路层使用的介质访问控制协议 MAC。无线网的 MAC 是 CSMA/CA；
- 扩展：MAC 只能提供无连接（比如 CSMA/CD 协议不需要通过连接，信道空闲了直接可以发送）、无确认的（比如 CSMA/CD 协议如果接收到正确数据了，没有进行确认反馈）服务，而为了在网络层提供不同的服务（有链接有确认，有链接无确认，无连接无确认），可以使用链路介质访问（LLC）协议，通过屏蔽不同的 MAC 子网的具体实现，将其变成统一的 LLC 界面，从而向网络层提供一致的服务。

#### 3.3.2 TokingRing：令牌环协议

- 令牌环协议是一种 LAN 协议，遵循的标准是 IEEE802.5，它规定了三种操作速率：1Mb/s、 4Mb/s和16Mb/s。
- 协议的所有的工作站都连接到一个环上，每个工作站只能向直接相邻的工作站传输数据。通过围绕环的令牌信息授予工作站传输权限，只有拿到令牌的工作站才能传输数据。 

### 3.4 网际层协议

#### 3.4.1 IP：网际互连协议

- IP 网际互连协议是整个 TCP/IP 协议簇的核心，也是构成互联网的基础。
- IP 位于 TCP/IP 模型的网络层，它可以向传输层提供各种协议的信息。

#### 3.4.2 IPv4：网际互连第 4 版协议

- IPv4，Internet Protocol version4，网际协议第 4 版，是 TCP/IP 协议使用的数据报传输机制。
- IPv4 的数据报是一个可变长分组，由头部和数据两部分组成，头部长度可由 20~60 个字节组成，该部分包含有与路由选择和传输有关的重要信息。
- 缺点：地址的数量有限，没有提供对实时音频和视频传输这种要求传输最小时延的策略和预留资源支持，不能对某些有数据加密和鉴别要求的应用提供支持。

#### 3.4.3 IPv6：网际互连第 6 版协议

- IPv6，Internet Protocol version6，网际协议第 6 版。
- 在 IPv6 中，IP 地址格式和分组长度以及分组的格式都改变了，IPv6 每个分组由必须的基本头部和其后的有效载荷组成，有效载荷由可选的扩展头部和来自上层的数据组成，基本头部占用 40 字节，有效载荷可以包含 65535 字节数据。
- 主机要同时运行 IPv4 和 IPv6 两套协议，必须使用**双协议栈**技术。
- 要使两个 IPv6 结点可以通过现有的 IPv4 网络进行通信，必须通过**隧道技术**，通过将 IPv6 分组封装后在 IPv4 上传输，到达目的地后再恢复成 IPv6。
- 要使纯 IPv4 与纯 IPv6 进行通信，必须使用**翻译技术**，转换 IP 报头地址，同时对分组进行语义翻译。

#### 3.4.4 ICMP：网际消息控制管理协议

- ICMP 用于在网络中发送控制消息，提供各种问题（设备，差错信息）反馈，通过这些信息，使网络管理者可以对所发生的问题作出诊断，然后采取适当的措施解决问题，比如网络连通性测试。
- ICMP 是网络层协议，但是它不像 IP 协议和 ARP 协议一样直接传递给数据链路层，而是先将数据封装成 IP 数据包，然后再传递给数据链路层。
- 在日常工作中，ping，traceroute 命令是基于 ICMP 协议来实现的。

#### 3.4.5 IGMP：网际组消息管理协议

- IGMP 协议面向的是网络中的多播设备，其作用是让连接在本地局域网上的多播路由器知道本局域网上是否有主机参加或者退出了多播组。
- 多播地址只适用于目的地址，而不能用于源地址，所以，对多播数据包不产生 ICMP 差错报文。

#### 3.4.6 ARP：地址解析协议

- 因为数据链路层使用的是 MAC 地址，而网际层使用的是 IP 地址，因此需要 ARP 协议来使这两个地址间产生关联。
- ARP 的作用是通过目标设备的 IP 地址，查询目标设备的 MAC 地址，然后将计算机的网络地址 IP 转化为物理地址 MAC。

#### 3.4.7 RARP：返向地址转换协议

- 与 ARP 相反，将局域网中某个主机的物理地址 MAC 转换为 IP 地址。

### 3.5 传输层协议

#### 3.5.1 TCP：传输控制协议

- TCP 是面向连接的运输层协议。应用程序在使用 TCP 协议之前，必须先建立 TCP 连接。在传送数据完毕后，必须释放已经建立的 TCP 连接。每一条 TCP 连接只能有两个端点，每一条 TCP 连接只能是点对点的(一对一)
- TCP 提供全双工通信。TCP 允许通信双方的应用进程在任何时候都能发送数据。TCP 连接的两端都设有发送缓存和接受缓存，用来临时存放双向通信的数据。
- TCP 建立连接的过程叫做握手，握手需要在客户和服务器之间交换三个 TCP 报文段。客户向服务器发送连接请求，服务器向客户发送连接建立请求，客户向服务器确认建立连接。
- TCP 关闭连接的过程叫做挥手，握手需要在客户和服务器之间交换四个 TCP 报文段。客户向服务器发送关闭连接请求，服务器向客户发送收到关闭连接请求，确认关闭连接请求，客户向服务器确认连接关闭。
- TCP 连接的建立和关闭需要三次握手、四次挥手。

#### 3.5.2 UDP：用户数据报协议

- 一个简单的面向无连接的，不可靠的数据报的传输层协议。
- UDP 为网络层以上和应用层以下提供了一个简单的接口进行数据的不可靠交付。UDP 仅仅将要发送的数据报传送至网络，并接收从网上传来的数据报，而不与远端的 UDP 模块建立连接。
- UDP 应用一般必须允许一定量的丢包、出错和复制。

### 3.6 应用层协议

#### 3.6.1 传输层走 TCP

- POP3： 邮局协议的第 3 个版本
- SMTP： 简单邮件传输协议
- FTP：文件传输协议
- Telnet：远程管理协议
- HTTP：超文本传输协议

#### 3.6.2 传输层走 UDP

- DHCP：动态主机配置协议
- SNMP：简单网络管理协议
- TFTP： 简单文件传输协议

#### 3.6.3 看情况的

- DNS： 域名系统，作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。进行域名查询的时候，走的是 UDP；进行 DNS 服务的区域传送时走的是 TCP。
- NFS：网络文件系统

### 3.7 其他

#### 3.7.1 PPP 数据链路层协议

- PPP 点对点协议是互联网中广泛使用的数据链路层通信协议，它为点对点链路上直接相连的两个结点之间提供了一种数据传输的方式。
- PPP 使用以下两种协议进行验证：
  - 密码验证协议（PAP）使用双向握手为远程节点提供一个简单的设立身份的方法，通过用户名和密码在链路中明文不断的发送，直到鉴权完成或连接终止。
  - 质询握手验证协议（CHAP）通过三次握手验证身份，比 PAP 更为安全，且不在链路中明文发送数据，支持单向和双向认证。

#### 3.7.2 LDAP 会话层协议

- 轻型目录访问协议（LDAP）是一个开放的，中立的，工业标准的会话层协议。
- LDAP 通过 IP 协议提供访问控制和维护分布式信息的目录信息。

#### 3.7.3 DHCP 应用层协议

- DHCP 动态主机配置协议是一种存在于应用层的网络管理协议。在 DHCP 的帮助下，可以动态地给网络上的任何设备或节点分配一个唯一的互联网协议 IP 地址，使它们可以使用这个 IP 进行通信。
- DHCP 使用 UDP 协议工作，统一使用 67（服务器端），68（客户端）端口。
- 在 DHCP 数据包中，可以包含客户机 MAC 地址，DHCP 服务器 IP，默认网关地址，DNS 服务器地址，以及分配给客户机的 IP 地址和掩码。

#### 3.7.4 X.25 协议

- 一个使用电话或者ISDN设备作为网络硬件设备来架构广域网的 ITU-T 网络协议。
- X.25 协议允许不同网络中的计算机通过一台工作在网络层的中间计算机相互通信。

### 3.8 常用协议及其端口

| 端口号 | 描述                             |
| ------ | -------------------------------- |
| 21     | FTP 文件传输协议的端口号         |
| 23     | Telnet 远程终端协议的端口号      |
| 25     | SMTP 简单邮件传输协议的端口号    |
| 53     | DNS 域服务器所开放的端口         |
| 69     | TFTP 简单文件传送协议的端口号    |
| 80     | HTTP 超文本传输协议的端口号      |
| 443    | HTTPS 加密超文本传输协议的端口号 |
| 110    | POP3 邮局协议版本3的端口号       |
| 123    | NTP 网络时间协议的端口号         |
| 161    | SNMP 简单网络管理协议 的端口号   |
| 520    | RIP 路由信息协议的端口号         |

## 4.网络设备

### 4.1 路由器

#### 4.1.1 功能特性

- 路由器工作在第3层网络层，它能理解数据中的 IP 地址，当识别到目标地址在本地网络时则不处理，否则会将数据转发出本地网络。
- 路由器能连接不同的网络，如以太网和 ATM 网。实际上，互联网就是由各种路由器连接起来的多个网络。
- 路由器具有路径选择的能力，在互联网通信时，路由器可以在一个节点到另一个节点的多条路径中选择通畅快捷的近路。提高通信速度，减轻网络系统通信负荷，并节约系统资源。
- 路由器提供分割广播风暴，提高带宽利用率的功能。
- 路由器提供路由表的记录功能，通过路由表保存子网的标志信息，网上路由器的个数和下个路由器的名字，保证路由器能选择出最佳路径。
- 软路由：指利用台式机或服务器配合软件形成路由解决方案，主要依靠软件设置来达成路由器的功能。
- 硬路由：指以专用的硬件设备来提供特定的路由器功能。
- 默认路由：指当路由器没有其他路由可选时，最后选择的路由。

#### 4.1.2 路由协议

- RIP 是 Internet 中常用的路由协议，路由器根据距离选择路由。
- OSPF 是一种基于链路状态的路由协议，需要每个路由器向同一管理员的所有其他路由器发送链路状态广播信息，OSPF 协议根据收集到的信息，通过一定算法计算出到每个节点的最短距离，并以此选择路由。

#### 4.1.3 路由匹配原则

- **管理距离决定了路由的优先**，管理距离越小说明路由优先级更高。
- **路由选项的匹配应当遵循最长匹配原则**，选择掩码最长的一条路由。在路由表中选择路由时，应当将地址转为二进制表示，从左开始，选择相同位数最多的一条数据。

### 4.2 集线器

#### 4.2.1 功能特性

- 集线器是对接收到的信号进行再生整形放大，以扩大网络的传输距离，同时把所有节点集中在以其为中心的节点上。
- 集线器属于纯硬件网络底层设备，其发送的数据没有针对性，只能使用广播方式进行数据传递，它把从一个端口接收的数据放大后向各个端口广播出去，其只是一个多端口的信号放大设备，在网络中起到信号放大和重发的作用。
- 集线器工作在第 1 层物理层，只与其上联设备通信，用于连接以太网，同层的各端口之间不会直接通信。
- 连接集线器的设备出现故障不会波及到集线器。

#### 4.2.2 缺陷

1. **数据通信不安全**，容易被非法截获。
2. **容易出现广播风暴问题**，由于采用共享带宽的广播方式，可能造成网络塞车现象。
3. **容易出现冲突域**，由于是非双工传输，同一时刻一个端口只能进行一个方向的数据通信，因此多个设备同时发送数据就会出现冲突域。

#### 4.2.3 分类

1. **无源集线器**：不对信号做任何处理，只进行广播。
2. **有源集线器**：能放大和再生信号。
3. **智能集线器**：不仅具有有源集线器的功能，还具有网络管理和路由功能。

#### 4.2.4 多级扩展

1. **堆叠**，从 UP 口连接另一台集线器的 DOWN 口。
2. **级联**，通过 Uplink 或 MDI 口进行级联。

### 4.3 交换机

- 交换机（Switch）是一种用于电（光）信号转发的网络设备。它可以为接入交换机的任意两个网络节点提供独享的电信号通路。
- 最常见的交换机是以太网交换机。其他常见的还有电话语音交换机、光纤交换机等。
- 交换机工作在第2层，对交换机来说，它能分辨出数据的源MAC地址和目的MAC地址，因此可以在任意两个端口间建立联系。但交换机并不懂得IP地址。
- **交换机提供分割冲突域的功能**。

### 4.4 光纤

- **单模光纤**：只能传输一种模式的光。适用于远程通信，对光源的谱宽和稳定性有较高的要求
- **多模光纤**：可传输多种模式的光，因模间色散较大，从而限制了传输数字信号的频率，且随距离增加而更加严重。多模光纤的传输距离就比较近。

## 5.Internet 基础知识及其应用

### 5.1 互联网 Internet

-  计算机网络通过集线器将计算机与连接节点组成，比如某个宿舍内的所有的电脑连接在一起，这就是一个计算机网络。
-  互联网则通过路由器进行连接，例如宿舍的同学要上网，就要把本地网络通过路由器连到可以上网的网络上。
-  互联网也可以叫做网络的网络。
-  **计算机网络把许多计算机连接在一起，而 Internet 把许多网络通过路由器连接在一起。**

![](/images/drawingbed/img/202309130931179.png)

### 5.2 三层 ISP 架构

- ISP，Internet Service Provider，互联网服务提供商，比如中国电信、中国移动、中国联通。
- ISP 可以从互联网管理结构 NIC 中申请 IP，InterNIC：负责美国及其他地区；ENIC：负责欧洲地区；APNIC：亚洲地区。
- 三层 ISP 架构是指： "主干ISP -> 地区ISP ->(本地ISP -> 校园ISP/企业ISP)"
- 例如：你向好友发了一条微信，这条微信首先会从你所在公司/学校的内网上发到当地的服务器，再从当地服务器发送到地区服务器，之后从地区服务器通过移动/联通/电信的服务器向你好友所在地的地区服务器转发，再通过本地服务器最终转发到好友所在公司/学校的内网。
- 为了能在低层 ISP 之间搭桥，互联网使用 IXP（互联网交换点）技术，使得地区 ISP 之间能直接相连进行交换分组，不需要走主干ISP。其特点是降低延时、降低费用。IXP 一般由数据链路层的交换机构成，结构复杂。

![](/images/drawingbed/img/202309130936314.png)

### 5.3 互联网的边缘部分

- 互联网的边缘是主机，计算机不全是主机，用户使用的才是主机。例如: 办公电脑、网站服务器、数据库服务器等，这些都是主机。
- 主机之间(进程)的通信方式有：C/S 方式(客户 - 服务器)，P2P 方式(peer-to-peer，对等连接)，我们所说的 B/S 架构、C/S 架构，都是属于 C/S 这种方式(客户请求，服务器响应)。

### 5.4 互联网的核心部分

#### 5.4.1 数据交换网络

- 互联网的核心是数据交换网络。通过路由器将不同的计算机网络连接并进行数据交换。
- 互联网主要通过电路，报文或分组三种方式进行网络数据的交换。

#### 5.4.2 电路交换

- 在通信之前，建立双方独占的物理通道。
- 优势在于通信线路双方独占，数据直达，传输时延小，实时性高；双方顺序发送，保证数据时序性；可以传输模拟信号，也可以传输数字信号；控制简单。
- 缺点在于建立连接需要一定时间；物理通道独占，其他用户无法使用，使用率低；不同类型、速率的终端难以通信，很难控制差错。

#### 5.4.3 报文交换

- 以报文为基本单位，报文携带有目标地址、源地址等信息，在交换节点采用存储转发的方式。就好比现在的快递，通过一个一个的快递点进行存放传输，单位是整个包裹。
- 优点在于不需要建立通信线路，用户随时可以发送报文；通信双方不固定占有一条线路，线路利用率提高。
- 其缺点是数据进行整份报文的存储转发，加大了延时性，实时性相对也比较差；只能使用数字信号；报文没有长度限制，存储转发节点要有足够的缓冲空间。

#### 5.4.3 分组交换

- 仍然采用存储转发的方式，但此时会将报文分割成若干组，逐个将这些组发送出去。
- 优点在于传输粒度更小，提高了网络的线路利用率；存储粒度更小，降低了存储时间，减少网络延时；存储转发节点只需要固定大小的缓冲区；减少了出错机率与重发的数据量；可以结合优先级策略，发送一些紧急数据。
- 缺点在于时序问题、分组丢失问题；仍然存在转发延时；每个组需要加入附加信息，加大了信息量，降低了通信效率，增加了处理时间。

## 6.网络管理以及其他

### 6.1 网络管理应具备功能

- 性能管理：监测网络的各种性能数据，进行阈值检查和分析。
- 故障管理：故障的发现、报告、诊断和处理。
- 计费管理：记录网络资源使用的情况，确定网络业务和资源的使用费用。
- 配置管理：对网络进行初始化，并且根据网络管理的机制，对于网络参数进行重新设置，来控制网络运行的状态。
- 安全管理：控制网络资源访问权限，使网络中的服务、数据和系统免受侵害和破坏。

### 6.2 子网

#### 6.2.1 概念

- **A 类地址**，24 位分配给主机号（3个字节），8 位网络号，可划分 2^24 个子网
- **B 类地址**，16 位分配给主机号（16个字节），16 位网络号，可划分 2^16 个子网
- **C 类地址**，8 位分配给主机号（8个字节），24 位网络号，可划分 2^8 个子网
- **子网掩码** 255.255.255.192 是 1111-1111.1111-1111.1111-1111.1100-0000 ，一共有 26 个 1，为了简化表示，可以用 /26 代替 255.255.255.192。
- **子网数** = 2^n（n是向主机借位数量，比如掩码/24划分为掩码/26的子网，需要向主机位借26-24=2位，因此子网数=4）
- **可用主机数** = 2^主机号 - 2（在子网中，全0和全1的地址将作为网关和广播地址，无法被主机使用）

#### 6.2.2 子网的计算

- **问题**：存在子网 192.168.10.1/27，请计算这个网络有多少个子网？
- 解：显然这是一个 C 类 IP 地址，但子网掩码不是默认的 /24，所以它是一个划分过的子网。因为划分子网需要向主机位借位，因此：子网数 = 2^(27-24) = 8 个。
- **问题**：存在子网 192.168.10.1/27，请计算子网中的主机数？和可用主机数？
- 解：由 /27 可知该子网的网络号为 27，显然主机号为 4 X 8 - 27 = 5，因此：主机数 = 2^5 = 32 台，可用主机数 = 32 - 2 = 30 台。


### 6.3 域名

#### 6.3.1 域名的组合

- 一个域名是由几部分（有可能只是一部分，也许是两部分，三部分...）组成的简单结构，它被点分隔，不同于中文书写顺序，它**需要从右到左阅读**。
- 域名的每一部分都提供着特定信息，以 `http://www.sina.com.cn` 为例，http 是通信使用的协议，sina.com.cn 是域名，www 是提供服务的机器的名字（主机名）。

![](/images/drawingbed/img/202307040936763.png)

#### 6.3.2 顶级域名

- TLD（Top-Level Domain，顶级域名）可以告诉用户域名所提供的服务类型。
- 顶级域名既可以包含拉丁字母，也可以包含特殊字符。
- 顶级域名最长可以达到 63 个字符，不过为了使用方便，大多数顶级域名都是两到三个字符。
- 顶级域名的完整列表是 ICANN 维护的。
- 一般的顶级域名：`.com, .org, .net`
- 地区的顶级域名：`.us, .fr, .sh`
- 包含 `.gov` 的顶级域名只能被政府部门使用。
- `.edu` 只能为教育或研究机构使用。

#### 6.3.3 二级域名

- 域名支持分级，从后往前级别依次降低。
- 比如 sina.com.cn 中，cn 是顶级域名，表示中国，com 是二级域名，表示商业机构（commercial），sina 是三级域名，一般用自己的名字。

### 6.4 层次化局域网

- **核心层的主要功能是将分组从一个区域高速的转发到另一个区域**。核心层是因特网的高速骨干，由于其重要性，因此在设计中应采用冗余组件设计，使其具备高可靠性，能快速适应变化。在设计核心层设备的功能时，应尽量避免使用数据包过滤、策略路由等降低数据包转发处理的特性，以优化核心层获得低延迟和良好的可管理性。
- **汇聚层是核心层和接入层的分界点，应尽量将资源访问控制、核心层流量的控制等都在汇聚层实施**。汇聚层应向核心层隐藏接入层的详细信息，汇聚层向核心层路由器进行路由宣告时，仅宣告多个子网汇聚而形成的一个网络汇聚层也会对接入层屏蔽网络其它部分的信息，汇聚层路由器可以不向接入层路由器宣告其它网络部分的路由，而仅仅向接入设备宣告自己为默认路由。
- **接入层要解决相邻用户之间的互访需要，并且为这些访问提供足够的宽带接入层还应该适当负责一些用户管理功能**，包括地址认证、用户认证、计费管理等内容接入层还负责一些用户信息收集工作，例如用户的IP地址、MAC地址、访问日志等信息。

### 6.5 网络维护命令

| 命令 | 描述                          |
| ------ | ----------------------------- |
| ping     | Internet 包探索器，用于测试网络连接量      |
| tracert     | 路由跟踪实用程序    |
| netstat     | 显示网络连接，路由表，网络接口信息  |
| arp    | 确认对应IP地址的网卡物理地址       |
| nslookup    | DNS 解析查询  |
| ipconfig/renew    | 刷新 DHCP 缓存    |
| ipconfig/flushdns    | 刷新 DNS 存储    |

### 6.6  Internet 与其他专用网的连接

- 支付网关（Payment Gateway）是银行金融网络系统和Internet网络之间的接口，是由银行操作的将Internet上传输的数据转换为金融机构内部数据的一组服务器设备，或由指派的第三方处理商家支付信息和顾客的支付指令。
- 防病毒网关是一种网络设备，用以保护网络内（一般是局域网）进出数据的安全。主要体现在病毒杀除、关键字过滤（如色情、反动）、垃圾邮件阻止的功能。
- 出口路由器一般指局域网出外网的路由器，或者指一个企业、小区、单位、城域网、省级网络、国家网络与外界网络直接相连的那台路由器。
- 堡垒主机是一种被强化的可以防御进攻的计算机，作为进入内部网络的一个检查点，以达到把整个网络的安全问题集中在某个主机上解决，从而达到省时省力，不用考虑其他主机的安全的目的。