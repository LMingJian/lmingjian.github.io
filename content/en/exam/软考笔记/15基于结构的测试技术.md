---
title: 15基于结构的测试技术
date: 2023-05-20
author: LM
---

## 1.静态测试

### 1.1 静态测试定义

- 静态测试不以测试数据的执行而是对测试对象的分析过程。 
- 静态测试存在于软件生命周期的各级测试。如，需求分析、概要设计、 详细设计及组件测试、集成测试和系统测试的阶段或层级。 
- 静态测试的方法，主要有人工（手工）评审与静态分析（人工或机器自 动检测）两大类。通常可分别采用一种方法或混合使用两种方法。 
- 静态测试中的评审（或审查）的基本思想和目标是对软件缺陷或错误的 一种预防措施。因而软件技术文档的审查是静态测试的主要任务之一。 

![](/images/drawingbed/img/202307041004180.png)

### 1.2 代码检查

- **代码走查**：一个开发人员与架构师讨论代码的过程，目的是交换有关代码是如何书写的思路等。
- **桌面检查**：一种比较古老的人工查找错误的方法，可以理解为代码编写人员对照错误列表来对程序进行推演，测试数据的过程。此过程一般由单人完成。
- **代码审查**：对计算机源代码系统化地审查，其目的是在找出及修正在软件开发初期未发现的错误，提升软件质量及开发者的技术。

### 1.3 软件编码规范

- **源程序文档化检查**，包括符合的命名，程序的注释等
- **数据说明检查**，包括数据说明次序，语句中变量顺序检查
- **程序结构检查**，程序应采用基本的控制结构，避免不必要的转移控制等
- **输入输出方式**，应当明确标注输入输出方式
- **代码注释率**，应当不小于代码行数的 20%

### 1.4 代码的质量度量

- **Line（行）复杂度**：以代码的行数（LOC）作为计算度量的基准。
- **Halstead（运算符与运算元）复杂度**：以程序中使用到的运算符与运算元数量作为计数目标（直测指标），据此来计算程序的容量和工作量。 
- **McCabe（圈）复杂度**：它是将程序流程图结构转化为有向图结构，以图形（有向图）为基础来衡量软件或程序的复杂度度量。 

## 2.控制流图

### 2.1 控制流图的定义

- 控制流图是描述程序控制流的一种图示方法，使用节点和控制流来进行描述，常用于静态测试中代码的结构化检测。
- 节点代表基本程序块，可以是一个单独的判断或循环语句，也可以是一段顺序执行的程序段。
- 区域代表一组节点与其相连的边共同构成的部分。

![](/images/drawingbed/img/202307041004284.png)

### 2.2 McCabe（圈）复杂度

- 程序的 McCabe （圈）复杂度，又称环路复杂度，一般用圈复杂度 V(G) 来描述。
- 圈复杂度用来衡量一个程序模块所包含判定结构的复杂程度，数量上表现为独立路径（独立路径 / 线性无关的基本路径是指与其他已有路径至少有一个新处理语句或一个新判断的程序通路，即新路径不能由旧路径截取组合）的条数。同时，圈复杂度也是程序中每个可执行语句至少执行一次所需测试用例数。
- **控制流图边的数量 - 节点的数量 + 2**
- **控制流图判定节点的数量 + 1**
- **控制流图中的区域数（主要图形外的内容也应记作一个区域）**

### 2.3 基本圈复杂度

- 基本圈复杂度 EV(G)，用来衡量程序的非结构化程度。
- 基础圈复杂度高意味着，程序非结构化程度高，难以模块化和维护。
- **当基本复杂度为 1，这个模块是充分结构化的。**
- **当大于 1 而小于圈复杂度时，这个模块是部分结构化。**
- **当等于圈复杂度时，这个模块是完全非结构化。** 
- 基础圈复杂度的计算方法是将控制流图中的结构化部分简化成节点（保留起点终点，聚合中间过程），计算简化后控制流图的圈复杂度就是基本复杂度。

## 3.动态测试

### 3.1 逻辑覆盖法设计用例

- **语句覆盖 SC**：最弱的逻辑覆盖，每条语句至少被执行一次
- **判定(分支)覆盖 DC**：使每个判定至少获得一次真值和一次假值，或使每一个取真分支和取假分支至少执行一次。常规来说只有`if`被称为判定语句
  - 示例： 假设 A、B 为布尔变量，对于逻辑表达式`( A && B || C )`，需要 2 个测试用例才能完成判定覆盖(DC)。
- **条件覆盖 CC**：使每个判定中的每个逻辑条件可能值至少满足一次，如`if((x>2)&&(y<10))`，不考虑整个判定的可能值
- **条件判定覆盖 CDC**：使每个判定中的所有条件可能取值至少执行一次，同时，所有判定的可能结果至少执行一次
- **条件组合(多条件)覆盖 MCC**：使每个判定中逻辑条件的各种可能组合都出现一次，条件组合覆盖的用例数是 2^n，n 是判定中的逻辑条件
  - 示例：对于逻辑表达式`((a||(b&c))||(c&&d))`，因为`&`为位运算，不是逻辑条件（同理 `|` 也是位运算），所以判定中的逻辑条件为：`a、b&c、c、d`，即需要 2^4 个测试用例才能完成条件组合覆盖
- **修正条件判定覆盖 MCDC**：要求在一个程序中每一种输入输出至少得出现一次，在程序中的每一个条件必须产生所有可能的输出结果至少一次，并且存在用例使得每一个判定中的每一个条件能够独立影响一个判定的输出，即在其他条件不变的前提下仅改变这个条件的值，而使判定结果改变，其测试用例数一般为条件数+1~条件数*2的范围内
- **路径覆盖 PC**：覆盖程序中所有可能路径

### 3.2 逻辑覆盖间关系

|      | SC   | DC   | CC   | CDC  | MCC  | MCDC | PC   |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| SC   | —    |      |      |      |      |      |      |
| DC   | Y    | —    |      |      |      |      |      |
| CC   | ?    | ?    | —    |      |      |      |      |
| CDC  | Y    | Y    | Y    | —    |      |      |      |
| MCC  | Y    | Y    | Y    | Y    | —    |      |      |
| MCDC | Y    | Y    | Y    | Y    | ?    | —    |      |
| PC   | Y    | Y    | Y    | Y    | ?    | Y    | —    |

- 竖轴内容决定横轴内容
- 如 100 % CC 不一定满足 100% DC
- 如 100% DC 一定满足 100% SC